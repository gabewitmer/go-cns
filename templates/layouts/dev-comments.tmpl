
{{ define "title" }}All Comments{{ end }}
{{ define "navbar" }}
	{{ template "secure-admin-navbar" . }}
{{ end }}
{{ define "content" }}
<br><br>
	<div class="row">
		<div class="col-lg-offset-3 col-lg-6">
			<div class="panel panel-default">
				<div class="panel-heading">
					All Comments
				</div>
				{{ if .comments }}
					<br>
					<table id="comments" class="table table-striped table-bordered">
						<thead>
							<tr>
								<th>Name</th>
								<th>Link</th>
								<th>Comment</th>
								<th>Status</th>
							</tr>
						</thead>
						<tbody>
							{{ range $comment := .comments }}
								<tr>
									<td>{{ $comment.Name }}</td>
									<td><a href="{{ $comment.Url }}">Visit</a></td>
									<td><a href="#" data-toggle="modal" data-target="#displayModal" data-display="{{ $comment.Com }}">View</a></td>
									<td>
										{{ if $comment.Closed }}
											Closed <a href="/dev/comment/{{ $comment.Id }}?closed=false">Click to re-open</a>
										{{ else }}
											Open <a href="/dev/comment/{{ $comment.Id }}?closed=true">Click to close</a>
										{{ end }}
									</td>
								</tr>
							{{ end }}
						</tbody>
					</table>
				{{ else }}
					<div class="text-center panel-body">
						No Comments
					</div>
				{{ end }}
			</div>
		</div>
	</div>

	<div class="modal fade" id="displayModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="exampleModalLabel">Information</h4>
				</div>
				<div class="modal-body">
					<pre id="modalDisplay"></pre>
				</div>
			</div>
		</div>
	</div>
{{ end }}
{{ define "scripts" }}
	<script src="/static/js/delete.js"></script>
	<script>
		$(document).ready(function() {
			$('#comments').DataTable();
			$('#displayModal').on('show.bs.modal', function (event) {
				var comment = $(event.relatedTarget).data('display');
				$('pre#modalDisplay').text(comment);
			})
		});
	</script>
{{ end }}
